#!/bin/sh

# This creates a stub header for things that need multilib and don't put arch-specific things in lib.

if [ "$1" = "" ]; then
	echo "Usage: $0 header_path"
	exit 1
fi

path=$1
basename=$(basename $1 .h)

# Creates a stub header for multilib.

  echo -e "/* ${basename}.h - Multilib Autogenerated Stub Header - don't edit unless needed */" > $1
  echo -e "#ifndef __STUB__${basename}_H__" >> $1
  echo -e "#define __STUB__${basename}_H__" >> $1
  echo -e "" >> $1
  echo -e "#if defined(__x86_64__) || defined(__sparc64__) || defined(__arch64__) || defined(__powerpc64__) || defined (__s390x__)" >> $1
  echo -e "# if defined (__ILP32__)" >> $1
  echo -e "#  include \"${basename}-x32.h\"" >> $1
  echo -e "# else" >> $1
  echo -e "#  include \"${basename}-64.h\"" >> $1
  echo -e "# endif" >> $1
  echo -e "#else" >> $1
  echo -e "# include \"${basename}-32.h\"" >> $1
  echo -e "#endif" >> $1
  echo -e "" >> $1
  echo -e "#endif /* __STUB__${basename}_H__ */" >> $1
